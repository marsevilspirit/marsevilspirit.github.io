<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>marsevilspirit&#39;s blog</title><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,viewport-fit=cover"><link rel="canonical" href="https://www.marsevilspirit.com/"><link rel="apple-touch-icon" sizes="180x180" href="/img/marsevilspirit.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/marsevilspirit.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/marsevilspirit.png"><link rel="mask-icon" type="image/png" href="/img/marsevilspirit.png"><link rel="stylesheet" href="/css/normalize.css"><link rel="stylesheet" href="/css/et-book.min.css"><link rel="stylesheet" href="/css/LXGW.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/markdown.css"><link rel="stylesheet" href="/css/highlight/style1.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="marsevilspirit's blog" type="application/atom+xml">
</head><body><div class="wrapper"><div class="container"><header><h2><a href="/">marsevilspirit&#39;s blog</a></h2></header></div><div class="content"><div class="post"><h1>i3的安装和配置</h1><main class="post-md"><p>所有的配置文件我都放到了<a target="_blank" rel="noopener" href="https://github.com/marsevilspirit/dotfiles">dotflie</a>仓库中</p><h3 id="i3的安装和配置"><a href="#i3的安装和配置" class="headerlink" title="i3的安装和配置"></a>i3的安装和配置</h3><h4 id="i3的安装"><a href="#i3的安装" class="headerlink" title="i3的安装"></a>i3的安装</h4><p>i3-gaps已经合并入i3-wm中，不要下载i3-gaps。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S i3-wm</span><br></pre></td></tr></table></figure><h4 id="i3多显示屏的配置-包括竖屏"><a href="#i3多显示屏的配置-包括竖屏" class="headerlink" title="i3多显示屏的配置(包括竖屏)"></a>i3多显示屏的配置(包括竖屏)</h4><p>我配置i3的多显示屏主要是靠<code>xrandr</code></p><h5 id="xrandr的安装"><a href="#xrandr的安装" class="headerlink" title="xrandr的安装"></a>xrandr的安装</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S xrandr</span><br></pre></td></tr></table></figure><h5 id="xrandr命令查看显示器信息"><a href="#xrandr命令查看显示器信息" class="headerlink" title="xrandr命令查看显示器信息"></a>xrandr命令查看显示器信息</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">$ xrandr</span><br><span class="line">Screen 0: minimum 8 x 8, current 6720 x 2560, maximum 32767 x 32767</span><br><span class="line">DP-0 disconnected primary (normal left inverted right x axis y axis)</span><br><span class="line">DP-1 disconnected (normal left inverted right x axis y axis)</span><br><span class="line">DP-2 connected 2560x1600+0+0 (normal left inverted right x axis y axis) 388mm x 242mm</span><br><span class="line">   2560x1600     60.00*+ 240.00  </span><br><span class="line">HDMI-0 connected 2560x1440+2560+0 (normal left inverted right x axis y axis) 597mm x 336mm</span><br><span class="line">   2560x1440     59.97*+ 144.00   120.00    75.00  </span><br><span class="line">   3840x2160     59.94    50.00    29.97    23.98  </span><br><span class="line">   1920x1080     60.00    59.94    50.00  </span><br><span class="line">   1680x1050     59.95  </span><br><span class="line">   1600x900      60.00  </span><br><span class="line">   1440x900      59.89  </span><br><span class="line">   1280x1024     75.02    60.02  </span><br><span class="line">   1280x720      60.00    59.94    50.00  </span><br><span class="line">   1024x768      75.03    70.07    60.00  </span><br><span class="line">   800x600       75.00    72.19    60.32    56.25  </span><br><span class="line">   720x576       50.00  </span><br><span class="line">   720x480       59.94  </span><br><span class="line">   640x480       75.00    59.94    59.93  </span><br><span class="line">DP-3 disconnected (normal left inverted right x axis y axis)</span><br><span class="line">DP-4 disconnected (normal left inverted right x axis y axis)</span><br><span class="line">DP-5 connected 1600x2560+5120+0 left (normal left inverted right x axis y axis) 600mm x 330mm</span><br><span class="line">   2560x1600     60.00*+ 144.00   129.89   120.00    75.00  </span><br><span class="line">   1920x1200     59.88  </span><br><span class="line">   1920x1080     60.00    59.94    50.00  </span><br><span class="line">   1680x1050     59.95  </span><br><span class="line">   1600x900      60.00  </span><br><span class="line">   1440x900      59.89  </span><br><span class="line">   1280x1024     60.02  </span><br><span class="line">   1280x720      60.00    59.94    50.00  </span><br><span class="line">   1024x768      60.00  </span><br><span class="line">   800x600       60.32  </span><br><span class="line">   720x480       59.94  </span><br><span class="line">   640x480       59.94    59.93  </span><br><span class="line">DP-6 disconnected (normal left inverted right x axis y axis)</span><br><span class="line">DP-1-1 disconnected (normal left inverted right x axis y axis)</span><br><span class="line">HDMI-1-1 disconnected (normal left inverted right x axis y axis)</span><br><span class="line">DP-1-2 disconnected (normal left inverted right x axis y axis)</span><br><span class="line">HDMI-1-2 disconnected (normal left inverted right x axis y axis)</span><br></pre></td></tr></table></figure><p>通过输出可以看到有三个屏幕：DP-2, HDMI-0, DP-5</p><p>我的显示器布局：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">                                                                    ---------------------</span><br><span class="line">                             ---------------------------------------|                   |</span><br><span class="line">                             |                                      |                   |</span><br><span class="line">                             |                                      |                   |</span><br><span class="line">                             |                                      |                   |</span><br><span class="line">-----------------------------|                                      |                   |</span><br><span class="line">|                            |                 HDMI-0               |       DP-5        |</span><br><span class="line">|                            |               2560x1440              |     1600x2560     |</span><br><span class="line">|            DP-2            |                                      |                   |</span><br><span class="line">|          2560x1600         |                                      |                   |</span><br><span class="line">|                            |                                      |                   |</span><br><span class="line">|                            |                                      |                   |</span><br><span class="line">-----------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>i3对多屏幕适配还是不错的，只有DP-5没有竖过来。</p><p>我们用xrandr来给它旋转过来就好了：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ xrandr --output DP-2 --mode 2560x1600 --rate 240.00</span><br><span class="line">$ xrandr --output HDMI-0 --mode 2560x1440 --right-of DP-2 --rate 144.00</span><br><span class="line">$ xrandr --output DP-5 --mode 2560x1600 --right-of HDMI-0 --rotate left --rate 144.00</span><br></pre></td></tr></table></figure><h4 id="rofi-应用搜索"><a href="#rofi-应用搜索" class="headerlink" title="rofi(应用搜索)"></a>rofi(应用搜索)</h4><p>用rofi替代dmenu, 在config中设置(后期可美化)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># start dmenu (a program launcher) NOTE: change to rofi</span><br><span class="line">bindsym $mod+d exec --no-startup-id rofi -show drun</span><br></pre></td></tr></table></figure><h4 id="kitty-设置终端"><a href="#kitty-设置终端" class="headerlink" title="kitty(设置终端)"></a>kitty(设置终端)</h4><p>config:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># start a terminal</span><br><span class="line"># bindsym $mod+Return exec i3-sensible-terminal</span><br><span class="line"># NOTE: change to kitty</span><br><span class="line">bindsym $mod+Return exec kitty</span><br></pre></td></tr></table></figure><h4 id="polybar-状态栏"><a href="#polybar-状态栏" class="headerlink" title="polybar(状态栏)"></a>polybar(状态栏)</h4><p>将配置文件样例 <code>/etc/polybar/config.ini</code> 复制到 <code>$XDG_CONFIG_HOME/polybar/config</code>。<br><code>polybar</code> 默认按 <code>~/.config/polybar/config.ini</code>、<code>/etc/xdg/polybar/config.ini</code><br>和 <code>/ etc/polybar/config.ini</code> 的顺序查找文件，并将最先找到的作为配置文件。</p><p>arch wiki上有详细的配置方法: <a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/Polybar">polybar</a></p><p><code>~/.config/polybar/launch.sh</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 终止正在运行的 bar 实例</span></span><br><span class="line">killall -q polybar</span><br><span class="line"><span class="comment"># 如果你所有的 bar 都启用了 ipc，你也可以使用</span></span><br><span class="line"><span class="comment"># polybar-msg cmd quit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行 Polybar，使用默认的配置文件路径 ~/.config/polybar/config.ini</span></span><br><span class="line">polybar mybar 2&gt;&amp;1 | <span class="built_in">tee</span> -a /tmp/polybar.log &amp; <span class="built_in">disown</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Polybar launched...&quot;</span></span><br></pre></td></tr></table></figure><p>向i3的config中添加启动polybar的命令:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exec_always --no-startup-id $HOME/.config/polybar/launch.sh</span><br></pre></td></tr></table></figure><h4 id="picom混成器"><a href="#picom混成器" class="headerlink" title="picom混成器"></a>picom混成器</h4><p>有picom和picom-git两个安装包，我下的是picom。</p><p>picom的配置文件在<code>/etc/xdg/picom.conf</code>,<br>可以复制到 <code>~/.config/picom/picom.conf</code>中进行修改。</p><p>启动picom:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ picom -b</span><br></pre></td></tr></table></figure><p>我在使用picom的过程中，感觉到浏览器有些卡顿。<br>将picom的backend选项改为glx就好了。</p><h4 id="i3下没有声音的解决方法"><a href="#i3下没有声音的解决方法" class="headerlink" title="i3下没有声音的解决方法"></a>i3下没有声音的解决方法</h4><p>在&#x2F;etc目录下新建配置文件asound.conf 执行:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nvim /etc/asound.conf</span><br></pre></td></tr></table></figure><p>在asound.conf中写入以下内容:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">defaults.pcm.card 1</span><br><span class="line">defaults.pcm.device 0</span><br><span class="line">defaults.ctl.card 1</span><br></pre></td></tr></table></figure><p>就有声音了。</p></main><p>Sep 2024</p></div></div></div><footer class="footer"><div class="content has-text-centered"><p><a href="/about">About Mars</a> | <a href="https://github.com/marsevilspirit" , target="_blank">Github</a> | <a href="mailto:marsevilspirit@gmail.com">Email</a></p></div></footer></body></html>