<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>marsevilspirit&#39;s blog</title><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,viewport-fit=cover"><link rel="canonical" href="https://www.marsevilspirit.com/"><link rel="apple-touch-icon" sizes="180x180" href="/img/marsevilspirit.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/marsevilspirit.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/marsevilspirit.png"><link rel="mask-icon" type="image/png" href="/img/marsevilspirit.png"><link rel="stylesheet" href="/css/normalize.css"><link rel="stylesheet" href="/css/et-book.min.css"><link rel="stylesheet" href="/css/LXGW.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/markdown.css"><link rel="stylesheet" href="/css/highlight/style1.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="marsevilspirit's blog" type="application/atom+xml">
</head><body><div class="wrapper"><div class="container"><header><h2><a href="/">marsevilspirit&#39;s blog</a></h2></header></div><div class="content"><div class="post"><h1>dotflies的管理</h1><main class="post-md"><p>由于dotfile越来越多，每个dotfile创建一个git仓库显然是不现实的。<br>所以我打算创建一个dotfiles的git仓库统一管理。<br>参考farseerfc的博客:<a target="_blank" rel="noopener" href="https://farseerfc.me/zhs/using-gnu-stow-to-manage-your-dotfiles.html">https://farseerfc.me/zhs/using-gnu-stow-to-manage-your-dotfiles.html</a><br>我打算用GNU的stow来管理dotfiles。</p><p>arch linux安装stow</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S stow</span><br></pre></td></tr></table></figure><p><strong>迁移配置前，一定要先备份。</strong></p><p>建一个<code>$&#123;HOME&#125;/dotfiles</code>文件夹，在里面为每个应用创建子文件夹。然后把这些程序的配置从原本的家目录移动到这每一个对应的子文件夹中， 并保持它们在家目录中的文件夹结构。比如，如果某个文件原本应该位于家目录的顶层文件夹里， 那它现在应该放在这个程序名子目录的顶层文件夹。如果某个配置文件通常应该位于默认的 <code>$&#123;XDG_CONFIG_HOME&#125;/$&#123;PKGNAME&#125;</code> 位置 (<code>$&#123;HOME&#125;/.config/$&#123;PKGNAME&#125;</code>)， 那么现在它应该放在 <code>$&#123;HOME&#125;/dotfiles/$&#123;PKGNAME&#125;/.config/$&#123;PKGNAME&#125;</code> ，如此类推。然后在那个dotfiles文件夹里面，直接运行 <code>$stow $PKGNAME</code> 命令，Stow就会为你自动创建这些配置文件的符号链接到合适的位置。接下来就很容易为这个dotfiles目录初始化版本管理仓库，从而记录你对这些配置文件做的修改（并且这也可以极度简化在不同电脑之间 共享配置，这也是我想要这么做的主要原因）。</p><p>你原先的配置文件:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">home/</span><br><span class="line">    mars/</span><br><span class="line">        .config/</span><br><span class="line">            nvim/</span><br><span class="line">                [...some files]</span><br><span class="line">        .zshrc</span><br></pre></td></tr></table></figure><p>然后迁移配置的方式是，应该建一个 dotfiles 子目录，然后像这样移动所有配置文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">home/</span><br><span class="line">    mars/</span><br><span class="line">        .config/</span><br><span class="line">        dotfiles/</span><br><span class="line">            zsh/</span><br><span class="line">                .zshrc</span><br><span class="line">            nvim/</span><br><span class="line">                .config/</span><br><span class="line">                    nvim/</span><br><span class="line">                        [...some files]</span><br></pre></td></tr></table></figure><p>然后执行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/dotfiles</span><br><span class="line">$ stow bash</span><br><span class="line">$ stow uzbl</span><br><span class="line">$ stow vim</span><br></pre></td></tr></table></figure><p>然后，瞬间，所有你的配置文件（的符号链接）就安安稳稳地放入了它们该在的地方，无论原本这些目录结构 有多么错综复杂，这样安排之后的 dotfiles 文件夹内的目录结构立刻整理得有条有理， 并且可以很容易地转换成版本控制仓库。非常有用的一点是，如果你有多台电脑，可能这些电脑并没有 安装完全一样的软件集，那么你可以手选一些你需要的软件配置来安装。在你的 dotfiles 文件夹中总是 可以找到所有的配置文件，但是如果你不需要某个程序的某份配置，那你就不对它执行 stow 命令，它就不会扰乱你的家目录。</p></main><p>Oct 2024</p></div></div></div><footer class="footer"><div class="content has-text-centered"><p><a href="/about">About Mars</a> | <a href="https://github.com/marsevilspirit" , target="_blank">Github</a> | <a href="mailto:marsevilspirit@gmail.com">Email</a></p></div></footer></body></html>